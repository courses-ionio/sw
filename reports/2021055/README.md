### ΟΝΟΜΑΤΕΠΟΝΥΜΟ: AΧΙΛΛΕΑΣ ΖΕΡΒΟΣ

### ΑΡΙΘΜΟΣ ΜΗΤΡΩΟΥ: INF2021055

# Advanced_SW

# Εισαγωγή 

Η παρούσα εργασία αφορά την ανάπτυξη ενός εργαλείου σε Python για την αυτόματη μετάφραση αρχείων τύπου Markdown, τα οποία προέρχονται από αποθετήριο GitHub. Το εργαλείο αξιοποιεί προηγμένα μοντέλα γλωσσικής τεχνητής νοημοσύνης (LLMs) όπως το OpenAI GPT και το Gemini της Google, παρέχοντας στον χρήστη τη δυνατότητα διαδραστικής επιμέλειας των παραγόμενων μεταφράσεων.

Κύριος στόχος της εφαρμογής είναι η αυτοματοποίηση της διαδικασίας της μετάφρασης περιεχομένου διατηρώντας την αρχική μορφοποίηση (YAML headers, markdown συντακτικό), καθιστώντας το κατάλληλο για πολυγλωσσικές εκδόσεις τεκμηρίωσης έργων λογισμικού ανοιχτού κώδικα.
Η υλοποίηση του script πραγματοποιείται με γλώσσα Python και χωρίζεται σε τρία βασικά μέρη: τις βιβλιοθήκες που χρησιμοποιούνται, τις συναρτήσεις που υλοποιούν τη λειτουργικότητα, και το κύριο μέρος του προγράμματος που καλεί τις συναρτήσεις και εκτελεί τη ροή της μετάφρασης.

#  Περιγραφή Λειτουργίας

Η ροή λειτουργίας του προγράμματος περιλαμβάνει τα εξής στάδια:

1) Ανάκτηση των αρχείων: Το script συνδέεται με το `GitHub API`, εντοπίζει και κατεβάζει τα πρώτα 10 αρχεία .md από το αποθετήριο-στόχο.

2) Εξαγωγή και διατήρηση δομής: Τα αρχεία διαχωρίζονται σε YAML front matter και κυρίως σώμα.

3) Μετάφραση: Το YAML τμήμα κάθε αρχείου μεταφράζεται μέσω LLM, βάσει εισαγώμενου prompt κατα την εκίνηση του προγράμματος.

4) Επιμέλεια: Ο χρήστης έχει τη δυνατότητα να επεξεργαστεί το αποτέλεσμα μέσα από το τερματικό.

5) Αποθήκευση & Git: Τα μεταφρασμένα αρχεία αποθηκεύονται τοπικά, και αν επιθυμεί ο χρήστης, γίνονται commit και push στο συνδεδεμένο GitHub repository.

# Τεχνική Υλοποίηση

Η υλοποίηση βασίζεται σε Python και αξιοποιεί τις εξής κύριες βιβλιοθήκες:

1) os, subprocess: Για διαχείριση συστήματος αρχείων και εκτέλεση git εντολών.

2) requests: Για επικοινωνία με το GitHub API.

3) openai, google.generativeai: Για χρήση LLM από OpenAI ή Gemini.

4) prompt_toolkit: Για εισαγωγή και επεξεργασία πολυγραμμικού κειμένου στο terminal.

5) dotenv: Για ανάγνωση παραμέτρων από αρχείο .env.

# Υλοποίηση LLM Interface (llm_client.py)
Η σχεδίαση της εφαρμογής βασίζεται στη διαχωρισμένη υλοποίηση του interface προς τα LLMs σε δεύτερο αρχείο Python με όνομα llm_client.py. Το αρχείο αυτό παρέχει τη συνάρτηση get_llm_client(), η οποία διαχειρίζεται την επιλογή του παρόχου LLM (π.χ. OpenAI ή Gemini) και επιστρέφει ένα unified dictionary που περιέχει:

1) τον τύπο παρόχου (provider)

2) τον client instance (client)

3) το μοντέλο (model)

και τυχόν βοηθητικά components (π.χ. Content, Part για το Gemini)

Αυτό το `abstraction laye`r επιτρέπει στο κύριο script (translation.py) να είναι ανεξάρτητο από τις λεπτομέρειες υλοποίησης του εκάστοτε API, καθιστώντας την εφαρμογή επεκτάσιμη και ευέλικτη ως προς την ενσωμάτωση νέων μοντέλων στο μέλλον.

Η επιλογή του παρόχου καθορίζεται είτε από μεταβλητή στο .env αρχείο είτε εντός της συνάρτησης `get_llm_client()`, ενώ η κλήση του μοντέλου υλοποιείται με ασφαλή διακλάδωση (if llm["provider"] == ...) στο `translate_text()`.


# Βασικές Συναρτήσεις

## PromptSession και KeyBindings
Επιτρέπει στον χρήστη να επιμελείται τη μετάφραση απευθείας στο terminal. Η υποστήριξη διπλού Enter  λειτουργεί ως σήμα ολοκλήρωσης της επεξεργασίας και δίνει στο πρόγραμμα την εντολή να προχωρήσει στην επόμενη φάση της εκτέλεσης.

## get_repo_files()
Συνδέεται με το GitHub API και ανακτά τη λίστα αρχείων .md του αποθετηρίου, περιορίζοντας τα αποτελέσματα στα πρώτα δέκα. Η μέθοδος είναι επεκτάσιμη ώστε να καλύπτει μεγαλύτερο πλήθος ή συγκεκριμένα μονοπάτια.

## download_file(file_path)
Κατεβάζει κάθε αρχείο μέσω του raw GitHub URL και το αποθηκεύει τοπικά στο φάκελο ./github_md. Περιλαμβάνει χειρισμό σφαλμάτων και υποστήριξη UTF-8.

## translate_text(text, user_prompt)
Δημιουργεί το τελικό prompt, ενσωματώνοντας τις παραμέτρους γλώσσας και τις οδηγίες χρήστη. Ανάλογα με τον επιλεγμένο πάροχο (openai ή gemini), καλεί το κατάλληλο API και επιστρέφει το μεταφρασμένο YAML. Περιλαμβάνει καθαρισμό περιττής markdown σύνταξης (π.χ. `````yaml```).

## split_markdown_front_matter(text)
Διαχωρίζει το YAML front matter από το κύριο κείμενο, το οποίο μεταφράζεται αργότερα.

# Κύριο Μέρος Εκτέλεσης
Το κύριο τμήμα του script υλοποιεί την πλήρη ροή μεταφοράς, επεξεργασίας και μετάφρασης των αρχείων τεκμηρίωσης, ακολουθώντας προκαθορισμένα βήματα:

## Δημιουργία καταλόγων εργασίας και εξόδου
Κατά την εκκίνηση, το πρόγραμμα δημιουργεί (αν δεν υπάρχουν ήδη) τους καταλόγους `./github_md/`, `./translated/` και `translated/` εντός του repository, χρησιμοποιώντας την `os.makedirs() με exist_ok=True`. Οι φάκελοι αυτοί χρησιμοποιούνται για την προσωρινή αποθήκευση των ληφθέντων αρχείων, την έξοδο των μεταφρασμένων κειμένων και την τελική καταγραφή εντός του αποθετηρίου αντίστοιχα.

## Διαδραστικό prompt παραμετροποίησης μετάφρασης
Πριν ξεκινήσει η μετάφραση, ο χρήστης καλείται μέσω PromptSession να εισάγει ένα custom prompt, το οποίο ενσωματώνεται στην κλήση του LLM και καθοδηγεί την παραγωγή. Η εισαγωγή ολοκληρώνεται με διπλό Enter, ενεργοποιώντας τις ρυθμίσεις του `KeyBindings`.

## Επαναληπτική επεξεργασία markdown αρχείων
Για κάθε markdown αρχείο (με κατάληξη .md) που ανακτάται από το αποθετήριο GitHub:

Ανάκτηση: Χρησιμοποιείται η συνάρτηση `download_file(file_path)`, η οποία πραγματοποιεί HTTP αίτηση μέσω `requests.get()` προς το raw.githubusercontent.com, και αποθηκεύει το περιεχόμενο UTF-8 σε τοπικό αρχείο εντός του `./github_md/`.

Ανάλυση YAML front matter: Το αρχείο αναλύεται με τη συνάρτηση `split_markdown_front_matter(text)`, η οποία εντοπίζει και διαχωρίζει το metadata block τύπου YAML (περιεχόμενο μεταξύ ---), διατηρώντας την υπόλοιπη δομή ανέπαφη για ενσωμάτωση μετά τη μετάφραση.

Μετάφραση: Το YAML block μεταφέρεται στη συνάρτηση `translate_text()`, η οποία συνθέτει ένα πλήρες prompt με τις παραμέτρους `SOURCE_LANG`, `TARGET_LANG` και τις οδηγίες χρήστη, και πραγματοποιεί LLM κλήση μέσω του εκάστοτε client (OpenAI/Gemini). Το αποτέλεσμα καθαρίζεται από περιττά code block wrappers (π.χ. `````yaml```), και επιστρέφεται.

Επεξεργασία από τον χρήστη (προαιρετική): Το τελικό YAML + body επανενώνεται και εμφανίζεται στον χρήστη, ο οποίος έχει την επιλογή επεξεργασίας της μεταφράσης μέσω της συνάρτησης `edit_text_via_prompt_toolkit()`, εντός του terminal.

Αποθήκευση: Το μεταφρασμένο αρχείο αποθηκεύεται τόσο στον φάκελο `./translated/` όσο και στον αντίστοιχο υποφάκελο του repository, `translated/`, με χρήση της συνάρτησης `os.path.basename()` για διατήρηση του αρχικού ονόματος.

Αυτοματοποιημένο commit και push
Εφόσον έχουν δημιουργηθεί μεταφρασμένα αρχεία, η λίστα τους μεταβιβάζεται στη συνάρτηση `subprocess.run()`, η οποία εκτελεί τις εξής git εντολές:

`git add <αρχεία>` για σταδιοποίηση αλλαγών

`git commit -m ...` για καταγραφή νέου snapshot

`git push origin main` για αποστολή στο αποθετήριο GitHub

Προτού επιχειρηθεί το push, ελέγχεται η ύπαρξη απομακρυσμένου remote μέσω git remote, και αν απουσιάζει, προστίθεται δυναμικά μέσω git remote add origin.

# Παραδείγματα Μεταφράσεων και Έξοδος Συστήματος
![translator](https://github.com/user-attachments/assets/dc7942c3-858d-475b-8526-07285dd136f2)
![translator2](https://github.com/user-attachments/assets/328733d2-503e-4c80-8efc-fde225d7949b)


# Λίστα Επεκτάσεων / To-Do

Η παρούσα υλοποίηση αποτελεί ένα πλήρως λειτουργικό εργαλείο για μετάφραση αρχείων Markdown, ωστόσο υπάρχουν τεχνικές δυνατότητες επέκτασης που μπορούν να βελτιώσουν περαιτέρω την ευελιξία, την αποδοτικότητα και την εμπειρία χρήστη. Παρακάτω παρατίθενται οι σημαντικότερες μελλοντικές κατευθύνσεις:
1) Υποστήριξη μεγάλου όγκου δεδομένων

Περιγραφή: Τα σύγχρονα LLMs όπως το GPT έχουν περιορισμούς στο μέγεθος του input (συνήθως 8K–16K tokens ανά κλήση). Όταν το περιεχόμενο ενός markdown αρχείου υπερβαίνει αυτό το όριο, το μοντέλο αδυνατεί να το επεξεργαστεί.

Προτεινόμενη λύση: Ανάπτυξη μηχανισμού διαχωρισμού του κειμένου σε μικρότερα τμήματα (chunks), με δυνατότητα sequential ή parallel μετάφρασης ανά τμήμα. Ο επανασυνδυασμός των μεταφρασμένων κομματιών θα πρέπει να διατηρεί τη δομή του αρχικού αρχείου.

2) Μετάφραση και του κυρίως σώματος Markdown (body)

Περιγραφή: Στην παρούσα φάση, το εργαλείο μεταφράζει αποκλειστικά το YAML block (δηλαδή τα metadata). Το κύριο σώμα του αρχείου — που περιλαμβάνει τίτλους, περιγραφές, κώδικες, λίστες και παραγράφους παραμένει αμετάφραστο.

Προτεινόμενη λύση: Επέκταση της συνάρτησης translate_text() ώστε να επεξεργάζεται και το υπόλοιπο markdown περιεχόμενο. Η μετάφραση θα πρέπει να προσέχει την markdown σύνταξη (π.χ. #, *, []()), ώστε να διατηρείται η λειτουργικότητα της τεκμηρίωσης.

3) Εισαγωγή μηχανισμού ελέγχου εγκυρότητας εισόδου χρήστη (input validation με `while`)

Περιγραφή: Στην τρέχουσα μορφή, όταν το πρόγραμμα ζητά από τον χρήστη να επιλέξει αν θέλει να επεξεργαστεί ή να προχωρήσει στο επόμενο αρχείο (π.χ. "Would you like to edit the translation? (yes/no):"), η απάντηση δεν ελέγχεται ως προς την εγκυρότητα. Εάν δοθεί λάθος απάντηση (π.χ. "maybe" ή "yess"), το πρόγραμμα προχωρά με ανεπιθύμητη συμπεριφορά ή καταρρέει.

Προτεινόμενη λύση: Ενσωμάτωση ενός while βρόχου ελέγχου που θα ελέγχει την είσοδο του χρήστη μέχρι να δοθεί έγκυρη απάντηση (yes ή no). Παρόμοια λογική μπορεί να χρησιμοποιηθεί σε οποιοδήποτε σημείο απαιτείται διαδραστική επιλογή.

Αποθετήριο της εργασίας: [yaml-LLM-translator-cli](https://github.com/Axileaszervos/yaml-LLM-translator-cli)


